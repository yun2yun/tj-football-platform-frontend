**文档版本**：V1.1

**适用对象**：后端开发同学

**设计依据**：平台核心功能（成果申报 / 审核 / 存档 / 查询）+ 学生 / 教师 / 管理员三角色权限

**备注**：本文档为前端接口需求，后端可根据技术实现微调字段命名；未明确需求已做**扩展预留**，后续按实际业务调整，如有字段 / 格式疑问可随时沟通

## 一、接口通用规则

### 1. 基础请求地址

`baseURL: /api`（后端可根据部署环境拼接域名 / 端口，如`http://服务器IP:端口/api`）

### 2. 请求格式

所有接口默认**JSON 格式**传参，请求头统一设置：`Content-Type: application/json;charset=utf-8`；文件上传接口除外，单独指定请求头。

### 3. 响应格式（后端需严格遵循，前端统一解析）

所有接口返回数据结构保持一致，包含状态码、提示信息、业务数据，空数据返回空数组 / 空对象，**不返回 null**

json

```
{
  "code": 200, // 状态码：对应通用错误码说明
  "msg": "操作成功", // 提示信息，前端直接展示给用户
  "data": {} // 业务数据，成功返回对应数据，失败返回空对象/空数组
}
```

### 4. 通用权限字段

所有需要登录的接口，请求头需携带**令牌字段**，后端做登录态 + 角色权限双重校验：

`Headers: { token: "用户登录后获取的令牌字符串" }`

### 5. 通用错误码说明

统一前后端状态码认知，前端按此做固定逻辑处理，后端严格按此返回对应状态码

表格

|状态码|核心含义|前端处理建议|
|---|---|---|
|200|操作成功|解析 data 执行业务逻辑 / 展示数据|
|400|参数校验不通过|直接展示后端返回的 msg 提示|
|401|未登录 / 令牌过期|清空本地 token，强制跳转至登录页|
|403|无操作权限|提示「暂无该功能操作权限」|
|500|服务器内部错误|提示「系统异常，请稍后重试」（不展示后端 msg）|

## 二、公共模块接口（所有角色通用）

### 1. 用户登录接口

**接口名称**：用户账号密码登录

**请求方式**：POST

**接口路径**：`/login`

**请求头**：默认 JSON 请求头

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|username|string|是|用户名 / 教师工号 / 学生学号|2023001001|
|password|string|是|登录密码|123456abc|
|role|number|是|角色标识：1 = 学生，2 = 教师，3 = 管理员|1|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", // 登录令牌，前端本地存储
    "userInfo": {
      "id": 1, // 用户ID
      "username": "2023001001", // 用户名/学号/工号
      "name": "张三", // 真实姓名
      "role": 1, // 角色标识
      "roleName": "学生" // 角色名称
    }
  }
}
```

### 2. 用户退出登录接口

**接口名称**：用户退出登录

**请求方式**：POST

**接口路径**：`/logout`

**请求头**：携带 token + 默认 JSON 请求头

**请求参数**：无

**返回数据**（JSON）：

json

```
{
  "code": 200,
  "msg": "退出成功",
  "data": {}
}
```

### 3. 获取当前登录用户信息接口

**接口名称**：获取当前登录用户信息

**请求方式**：GET

**接口路径**：`/user/info`

**请求头**：携带 token + 默认 JSON 请求头

**请求参数**：无

**返回数据**（JSON）：

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "id": 1,
    "username": "2023001001",
    "name": "张三",
    "role": 1,
    "roleName": "学生",
    "phone": "13800138000", // 可选字段，有则返回无则不返
    "email": "zhangsan@mail.com" // 可选字段，有则返回无则不返
  }
}
```

### 4. 字典枚举数据查询接口

**接口名称**：查询平台基础枚举字典（成果类型 / 审核状态）

**请求方式**：GET

**接口路径**：

- 成果类型：`/dict/achievementType`
- 审核状态：`/dict/auditStatus`
    
    **请求头**：默认 JSON 请求头（**无需携带 token**，公开枚举）
    
    **请求参数**：无
    
    **返回数据**（JSON）：
    
    // 成果类型 /dict/achievementType 返回示例

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": [
    {"id": 1, "name": "足球战术"},
    {"id": 2, "name": "足球训练"},
    {"id": 3, "name": "足球赛事"},
    {"id": 4, "name": "足球科研"},
    {"id": 5, "name": "其他足球相关"}
  ]
}
```

// 审核状态 /dict/auditStatus 返回示例

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": [
    {"id": 0, "name": "待审核"},
    {"id": 1, "name": "审核通过"},
    {"id": 2, "name": "审核驳回"}
  ]
}
```

## 三、学生模块接口（角色标识：1）

所有接口**请求头均需携带 token**，且后端校验角色为学生，默认 JSON 请求头

### 1. 提交足球创新成果接口

**接口名称**：学生提交创新成果申报

**请求方式**：POST

**接口路径**：`/student/achievement/submit`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementName|string|是|成果名称|足球战术训练创新方案|
|achievementType|number|是|成果类型：关联 /dict/achievementType 的 id|2|
|achievementDesc|string|是|成果描述（详细介绍）|基于青少年足球的趣味训练方法设计...|
|fileList|array|否|成果附件列表（文件 ID 数组，文件先通过文件上传接口上传，返回 ID 后传入）|[1,2,3]|
|submitTime|string|否|提交时间（前端不传则后端自动生成，格式：YYYY-MM-DD HH:mm:ss）|2025-11-01 10:00:00|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "提交成功，等待教师审核",
  "data": {
    "achievementId": 1001 // 成果唯一ID，用于后续查询/编辑/删除
  }
}
```

### 2. 查询我的成果列表接口

**接口名称**：学生查询自己的所有成果（支持多条件筛选 + 分页）

**请求方式**：GET

**接口路径**：`/student/achievement/list`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementType|number|否|成果类型筛选：关联 /dict/achievementType 的 id|2|
|auditStatus|number|否|审核状态筛选：关联 /dict/auditStatus 的 id|0|
|page|number|是|页码，默认 1|1|
|size|number|是|每页条数，默认 10|10|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 20, // 符合条件的成果总条数
    "list": [
      {
        "achievementId": 1001,
        "achievementName": "足球战术训练创新方案",
        "achievementType": 2,
        "achievementTypeName": "足球训练",
        "auditStatus": 0,
        "auditStatusName": "待审核",
        "submitTime": "2025-11-01 10:00:00"
      }
    ]
  }
}
```

### 3. 查询成果详情接口

**接口名称**：学生查询单个成果的详细信息

**请求方式**：GET

**接口路径**：`/student/achievement/detail`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementId|number|是|成果唯一 ID|1001|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "achievementId": 1001,
    "achievementName": "足球战术训练创新方案",
    "achievementType": 2,
    "achievementTypeName": "足球训练",
    "achievementDesc": "基于青少年足球的趣味训练方法设计...",
    "fileList": [ // 附件列表，含文件ID、名称、访问/下载地址
      {
        "fileId": 1,
        "fileName": "训练方案.pdf",
        "fileUrl": "/api/file/down/1"
      }
    ],
    "auditStatus": 0,
    "auditStatusName": "待审核",
    "auditOpinion": "", // 审核意见，待审核/通过则为空，驳回则返回具体内容
    "submitTime": "2025-11-01 10:00:00",
    "auditTime": "" // 审核时间，待审核则为空
  }
}
```

### 4. 编辑未审核成果接口

**接口名称**：学生编辑待审核的成果（审核后不可编辑，后端做状态校验）

**请求方式**：PUT

**接口路径**：`/student/achievement/edit`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementId|number|是|成果唯一 ID|1001|
|achievementName|string|是|成果名称|青少年足球战术训练创新方案|
|achievementType|number|是|成果类型：关联 /dict/achievementType 的 id|2|
|achievementDesc|string|是|成果描述|基于 8-12 岁青少年足球的趣味训练方法设计...|
|fileList|array|否|成果附件列表（新上传的文件 ID 数组，覆盖原有附件）|[4,5]|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "编辑成功",
  "data": {}
}
```

### 5. 删除未审核成果接口

**接口名称**：学生删除待审核的成果（审核后不可删除，后端做状态校验）

**请求方式**：DELETE

**接口路径**：`/student/achievement/delete`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementId|number|是|成果唯一 ID|1001|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "删除成功",
  "data": {}
}
```

## 四、教师模块接口（角色标识：2）

所有接口**请求头均需携带 token**，且后端校验角色为教师，默认 JSON 请求头

### 1. 查询待审核成果列表接口

**接口名称**：教师查询分配给自己的待审核成果（支持类型筛选 + 分页）

**请求方式**：GET

**接口路径**：`/teacher/achievement/pending/list`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementType|number|否|成果类型筛选：关联 /dict/achievementType 的 id|2|
|page|number|是|页码，默认 1|1|
|size|number|是|每页条数，默认 10|10|
|**返回数据**（JSON）：|||||
|同「学生查询我的成果列表接口」返回格式（list 中新增**studentName/studentNo** 学生姓名 / 学号字段）|||||

### 2. 成果审核操作接口

**接口名称**：教师审核成果（通过 / 驳回，后端做待审核状态校验）

**请求方式**：POST

**接口路径**：`/teacher/achievement/audit`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementId|number|是|成果唯一 ID|1001|
|auditStatus|number|是|审核结果：关联 /dict/auditStatus 的 id（1 = 通过，2 = 驳回）|1|
|auditOpinion|string|否|审核意见（驳回时**必传**，通过时可选传）|方案设计合理，同意通过|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "审核成功",
  "data": {}
}
```

### 3. 查询已审核成果列表接口

**接口名称**：教师查询自己审核过的所有成果（支持筛选 + 分页）

**请求方式**：GET

**接口路径**：`/teacher/achievement/audited/list`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementType|number|否|成果类型筛选：关联 /dict/achievementType 的 id|2|
|auditStatus|number|否|审核结果筛选：关联 /dict/auditStatus 的 id（1 = 通过，2 = 驳回）|1|
|page|number|是|页码|1|
|size|number|是|每页条数|10|
|**返回数据**（JSON）：|||||
|同「学生查询我的成果列表接口」返回格式（list 中新增**studentName/studentNo/auditOpinion** 学生姓名 / 学号 / 审核意见字段）|||||

### 4. 查询审核成果详情接口

**接口名称**：教师查询单个成果的审核详情

**请求方式**：GET

**接口路径**：`/teacher/achievement/audit/detail`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|achievementId|number|是|成果唯一 ID|1001|
|**返回数据**（JSON）：|||||
|同「学生查询成果详情接口」返回格式（新增**studentName/studentNo** 学生姓名 / 学号字段）|||||

## 五、管理员模块接口（角色标识：3）

所有接口**请求头均需携带 token**，且后端校验角色为管理员，默认 JSON 请求头

### 1. 成果数据全局查询接口

**接口名称**：管理员查询平台所有成果数据（支持多条件精准筛选 + 分页）

**请求方式**：GET

**接口路径**：`/admin/achievement/all/list`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|username|string|否|学生学号 / 姓名模糊查询|张三 / 2023001|
|achievementType|number|否|成果类型筛选：关联 /dict/achievementType 的 id|2|
|auditStatus|number|否|审核状态筛选：关联 /dict/auditStatus 的 id|1|
|startDate|string|否|提交开始时间（格式：YYYY-MM-DD）|2025-10-01|
|endDate|string|否|提交结束时间（格式：YYYY-MM-DD）|2025-11-01|
|page|number|是|页码|1|
|size|number|是|每页条数|10|
|**返回数据**（JSON）：|||||
|同「学生查询我的成果列表接口」返回格式（list 中新增**studentName/studentNo/auditorName** 学生姓名 / 学号 / 审核教师姓名字段）|||||

### 2. 成果数据导出接口

**接口名称**：管理员导出平台所有成果数据（Excel 格式，支持筛选）

**请求方式**：GET

**接口路径**：`/admin/achievement/export`

**请求参数**：同「成果数据全局查询接口」（**无分页参数**，筛选所有符合条件的数据）

**返回数据**：Excel 文件流（浏览器直接触发下载，无 JSON 封装）

### 3. 用户管理 - 查询用户列表接口

**接口名称**：管理员查询平台所有用户（支持角色 / 关键词筛选 + 分页）

**请求方式**：GET

**接口路径**：`/admin/user/list`

**请求参数**（URL 传参 / Query）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|role|number|否|角色筛选：1 = 学生，2 = 教师，3 = 管理员|1|
|keyword|string|否|用户名 / 姓名 / 学号 / 工号模糊查询|张三|
|page|number|是|页码|1|
|size|number|是|每页条数|10|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 100, // 符合条件的用户总条数
    "list": [
      {
        "id": 1,
        "username": "2023001001",
        "name": "张三",
        "role": 1,
        "roleName": "学生",
        "createTime": "2025-09-01 00:00:00"
      }
    ]
  }
}
```

### 4. 用户管理 - 新增 / 编辑用户接口

**接口名称**：管理员新增 / 编辑平台用户（新增无 ID，编辑传 ID，后端做唯一校验）

**请求方式**：POST

**接口路径**：`/admin/user/saveOrUpdate`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|id|number|否|用户 ID（编辑必传，新增不传）|1|
|username|string|是|用户名 / 学号 / 工号（平台唯一，后端做重复校验）|2023001001|
|password|string|是|初始密码（新增必传，编辑不传则不修改密码）|123456abc|
|name|string|是|真实姓名|张三|
|role|number|是|角色标识：1 = 学生，2 = 教师，3 = 管理员|1|
|phone|string|否|手机号|13800138000|
|email|string|否|邮箱|zhangsan@mail.com|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "操作成功",
  "data": {}
}
```

### 5. 用户管理 - 删除用户接口

**接口名称**：管理员删除平台用户

**请求方式**：DELETE

**接口路径**：`/admin/user/delete`

**请求参数**（JSON）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|id|number|是|用户 ID|1|
|**返回数据**（JSON）：|||||

json

```
{
  "code": 200,
  "msg": "删除成功",
  "data": {}
}
```

## 六、通用文件上传 / 下载接口（所有角色通用）

### 1. 成果附件文件上传接口

**接口名称**：成果附件单文件 / 多文件上传

**请求方式**：POST

**接口路径**：`/file/upload`

**请求头**：携带 token + `Content-Type: multipart/form-data`

**请求参数**（表单上传）：

表格

|字段名|类型|是否必传|说明|示例|
|---|---|---|---|---|
|file|file|是|上传的文件（支持多文件）|训练方案.pdf|
|**返回数据**（JSON）：|||||
|// 单文件上传返回示例|||||

json

```
{
  "code": 200,
  "msg": "上传成功",
  "data": {
    "fileId": 1, // 文件唯一ID
    "fileName": "训练方案.pdf", // 原始文件名
    "fileUrl": "/api/file/down/1", // 文件下载/访问地址
    "fileSize": "2.5M" // 文件大小，格式化展示
  }
}
```

// 多文件上传返回示例（数组格式）

json

```
{
  "code": 200,
  "msg": "上传成功",
  "data": [
    {
      "fileId": 1,
      "fileName": "训练方案.pdf",
      "fileUrl": "/api/file/down/1",
      "fileSize": "2.5M"
    },
    {
      "fileId": 2,
      "fileName": "成果说明.docx",
      "fileUrl": "/api/file/down/2",
      "fileSize": "1.8M"
    }
  ]
}
```

### 2. 成果附件文件下载接口

**接口名称**：成果附件文件下载

**请求方式**：GET

**接口路径**：`/file/down/{fileId}`（RESTful 路径传参）

**请求头**：携带 token（防止未授权下载）

**请求参数**：路径传参 fileId（文件唯一 ID，关联上传接口返回的 fileId）

**返回数据**：对应文件的文件流（浏览器直接触发下载，无 JSON 封装）

## 七、后续扩展接口（待需求确认后补充）

### 1. 分级审核功能扩展

- 扩展背景：当前仅实现**教师单级审核**，若项目后期需落地「教师初审 + 管理员终审」的分级审核规则，补充以下接口 / 字段
- 待补充接口：管理员成果审核接口 `POST /admin/achievement/audit`（参数同教师审核，新增`auditLevel`字段标识审核层级：1 = 教师，2 = 管理员）
- 待补充字段：成果详情接口新增`auditRecords`数组（存储全量审核记录，含`auditLevel/auditorName/auditStatus/auditOpinion/auditTime`）
- 状态：**待分级审核规则确认后落地**

### 2. 动态菜单 / 精细化权限扩展

- 扩展背景：当前前端按角色写死菜单 / 路由，若需实现后端控制动态菜单 + 精细化按钮权限，补充以下接口
- 待补充接口：用户菜单查询接口 `GET /user/menu`（返回当前登录用户的菜单树，含`path/name/title/icon/permission`等字段）
- 状态：**待平台权限精细化需求确认后落地**

### 3. 密码管理功能扩展

- 扩展背景：当前无密码修改 / 重置功能，为适配管理平台常规需求，补充以下接口
- 待补充接口：
    
    1. 用户自主修改密码 `POST /user/changePassword`（参数：`oldPassword/newPassword`，后端做原密码校验）
    2. 管理员重置用户密码 `POST /admin/user/resetPassword`（参数：`userId/newPassword`，后端生成默认密码或接收自定义密码）
    
- 状态：**待平台账号管理规则确认后落地**

### 4. 数据统计 / 看板功能扩展

- 扩展背景：当前仅实现成果数据查询 / 导出，若学院后期需数据可视化看板，补充以下接口
- 待补充接口：成果数据统计接口 `GET /admin/achievement/statistics`（参数同管理员全局查询，返回按类型 / 状态 / 时间段的聚合统计数据）
- 返参示例：`{"typeCount":[{"id":1,"name":"足球战术","count":20}],"statusCount":[{"id":0,"name":"待审核","count":8}]}`
- 状态：**待数据统计维度需求确认后落地**

## 八、文档更新与协作说明

1. 本文档为 V1.1 版本，后续随业务需求调整同步更新版本号，更新后会第一时间同步给后端开发同学；
2. 后端开发过程中若需微调字段命名 / 传参方式，需提前与前端沟通，确认无影响后再修改；
3. 接口开发完成后，后端需提供接口联调地址，前端按文档进行对接，遇接口返回与文档不一致的情况，优先以文档为准协商调整。

---

**文档最后更新时间**：2026 年 2 月

**设计人**：前端开发（魏卓越）

**对接人**：后端开发同学